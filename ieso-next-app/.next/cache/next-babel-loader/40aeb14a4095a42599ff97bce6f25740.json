{"ast":null,"code":"import Ajv from 'ajv';\nimport { getSession } from 'next-auth/client';\nimport post from '../../schemas/post';\nconst ajv = new Ajv();\nconst validate = ajv.compile(post);\nexport default (async (req, res) => {\n  const session = await getSession({\n    req\n  });\n\n  if (session) {\n    // Signed in\n    console.log(validate(req.body));\n    console.log(req.body.formData);\n    console.log(validate(req.body.formData));\n  } else {\n    // Not Signed in\n    res.status(401);\n  }\n\n  res.end();\n});","map":{"version":3,"sources":["/usr/src/app/pages/api/post.js"],"names":["Ajv","getSession","post","ajv","validate","compile","req","res","session","console","log","body","formData","status","end"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AAEA,MAAMC,GAAG,GAAG,IAAIH,GAAJ,EAAZ;AACA,MAAMI,QAAQ,GAAGD,GAAG,CAACE,OAAJ,CAAYH,IAAZ,CAAjB;AAEA,gBAAe,OAAOI,GAAP,EAAYC,GAAZ,KAAoB;AACjC,QAAMC,OAAO,GAAG,MAAMP,UAAU,CAAC;AAAEK,IAAAA;AAAF,GAAD,CAAhC;;AACA,MAAIE,OAAJ,EAAa;AACX;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYN,QAAQ,CAACE,GAAG,CAACK,IAAL,CAApB;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAG,CAACK,IAAJ,CAASC,QAArB;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAYN,QAAQ,CAACE,GAAG,CAACK,IAAJ,CAASC,QAAV,CAApB;AACD,GALD,MAKO;AACL;AACAL,IAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX;AACD;;AACDN,EAAAA,GAAG,CAACO,GAAJ;AACD,CAZD","sourcesContent":["import Ajv from 'ajv';\nimport { getSession } from 'next-auth/client'\nimport post from '../../schemas/post'\n\nconst ajv = new Ajv()\nconst validate = ajv.compile(post)\n\nexport default async (req, res) => {\n  const session = await getSession({ req })\n  if (session) {\n    // Signed in\n    console.log(validate(req.body))\n    console.log(req.body.formData)\n    console.log(validate(req.body.formData))\n  } else {\n    // Not Signed in\n    res.status(401)\n  }\n  res.end()\n}"]},"metadata":{},"sourceType":"module"}