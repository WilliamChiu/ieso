{"ast":null,"code":"import { MongoClient } from 'mongodb';\nconst uri = \"mongodb://mongo:27017\";\nconst client = new MongoClient(uri);\nexport default (async (req, res) => {\n  let page = req.body.page;\n  let options = page ? {\n    limit: 10,\n    skip: 10 * page\n  } : {\n    limit: 10\n  };\n  await client.connect();\n  const database = client.db(\"posts\");\n  const collection = database.collection(\"posts\");\n  let posts = await collection.find({}, options);\n  res.statusCode = 200;\n  res.json(posts);\n});","map":{"version":3,"sources":["/usr/src/app/pages/api/getPosts.js"],"names":["MongoClient","uri","client","req","res","page","body","options","limit","skip","connect","database","db","collection","posts","find","statusCode","json"],"mappings":"AAAA,SAASA,WAAT,QAA4B,SAA5B;AACA,MAAMC,GAAG,GAAG,uBAAZ;AACA,MAAMC,MAAM,GAAG,IAAIF,WAAJ,CAAgBC,GAAhB,CAAf;AAEA,gBAAe,OAAOE,GAAP,EAAYC,GAAZ,KAAoB;AACjC,MAAIC,IAAI,GAAGF,GAAG,CAACG,IAAJ,CAASD,IAApB;AACA,MAAIE,OAAO,GAAGF,IAAI,GAAG;AAACG,IAAAA,KAAK,EAAE,EAAR;AAAYC,IAAAA,IAAI,EAAE,KAAKJ;AAAvB,GAAH,GAAkC;AAACG,IAAAA,KAAK,EAAE;AAAR,GAApD;AACA,QAAMN,MAAM,CAACQ,OAAP,EAAN;AACA,QAAMC,QAAQ,GAAGT,MAAM,CAACU,EAAP,CAAU,OAAV,CAAjB;AACA,QAAMC,UAAU,GAAGF,QAAQ,CAACE,UAAT,CAAoB,OAApB,CAAnB;AACA,MAAIC,KAAK,GAAG,MAAMD,UAAU,CAACE,IAAX,CAAgB,EAAhB,EAAoBR,OAApB,CAAlB;AACAH,EAAAA,GAAG,CAACY,UAAJ,GAAiB,GAAjB;AACAZ,EAAAA,GAAG,CAACa,IAAJ,CAASH,KAAT;AACD,CATD","sourcesContent":["import { MongoClient } from 'mongodb'\nconst uri = \"mongodb://mongo:27017\";\nconst client = new MongoClient(uri);\n\nexport default async (req, res) => {\n  let page = req.body.page\n  let options = page ? {limit: 10, skip: 10 * page} : {limit: 10}\n  await client.connect()\n  const database = client.db(\"posts\")\n  const collection = database.collection(\"posts\")\n  let posts = await collection.find({}, options)\n  res.statusCode = 200\n  res.json(posts)\n}"]},"metadata":{},"sourceType":"module"}